# 核心区别总结表

| 特性         | Nginx 保持会话 (HTTP Keep-Alive)            | Keepalived (高可用)                                      |
|:---------- |:--------------------------------------- |:----------------------------------------------------- |
| **中文名/别名** | 连接保持、持久连接、HTTP Keep-Alive               | 高可用、故障转移、IP漂移                                         |
| **解决的问题**  | **减少连接开销，提升单次连接效率**                     | **提供服务高可用性，防止单点故障**                                   |
| **协议/层次**  | **应用层**（HTTP/1.1 Keep-Alive）            | **网络层**（VRRP 协议）                                      |
| **作用范围**   | 单个 TCP 连接的**生命周期**                      | 整个服务节点的**可用性状态**                                      |
| **配置位置**   | Nginx 的 `http`, `server`, `upstream` 块中 | 独立的 Keepalived 配置文件 `/etc/keepalived/keepalived.conf` |
| **依赖关系**   | 通常需要 **Nginx** 本身来配置                    | 是一个**独立的软件**，可以与 Nginx、MySQL、Apache 等任何服务配合使用         |
| **使用场景**   | 任何需要优化 HTTP 连接的场景                       | 构建 Web、数据库、负载均衡器等服务的高可用集群                             |

---

# 长连接 vs 保持会话 核心区别总结表

| 特性              | 长连接                                                                  | 保持会话                                          |
|:--------------- |:-------------------------------------------------------------------- |:--------------------------------------------- |
| **英文名**         | Keep-Alive, Persistent Connection                                    | Session Persistence, Session Stickiness       |
| **解决的问题**       | **连接效率**问题（减少TCP握手）                                                  | **状态维持**问题（保证请求落到同一台服务器）                      |
| **工作层次**        | **传输层**（TCP）                                                         | **应用层**（HTTP/Session）                         |
| **作用对象**        | 两个端点之间的**通信通道**                                                      | 一个用户的**一系列请求**                                |
| **Nginx 配置关键词** | `keepalive_timeout`, `keepalive_requests`, `upstream` 中的 `keepalive` | `ip_hash`, `sticky cookie`                    |
| **生命周期**        | 由一个超时时间或最大请求数决定                                                      | 通常由一个会话周期（如用户关闭浏览器）决定                         |
| **类比**          | **打电话不挂断**：说完一件事，可以接着说下一件，不用重新拨号。                                    | **找同一个客服**：你第一次被分配到工号101的客服，之后你的所有问题都希望由他来解决。 |


